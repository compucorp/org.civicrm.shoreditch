/* Variables */

$checkbox-switch-speed:       0.2s;
$checkbox-switch-gap:         2px;
$checkbox-switch-size-small:  10px;
$checkbox-switch-size-normal: 20px;
$checkbox-switch-size-medium: 30px;
$checkbox-switch-size-large:  40px;

/* Basic (default) styles */

.checkbox-switch {
  position: relative;
}

.checkbox-switch input {
  bottom: 0;
  cursor: pointer;
  display: block;
  filter: alpha(opacity=0);
  height: 0%;
  left: 0;
  margin: 0;
  opacity: 0;
  position: absolute;
  right: 0;
  top: 0;
  width: 0%;
}

.checkbox-switch input + span {
  cursor: pointer;
  padding-left: $checkbox-switch-size-normal * 2;
  user-select: none;
}

.checkbox-switch input + span::before {
  background-color: $crm-gray-matte;
  border-radius: $checkbox-switch-size-normal;
  box-shadow: none;
  content: '';
  display: inline-block;
  height: $checkbox-switch-size-normal;
  left: 0;
  position: absolute;
  transition: background-color $checkbox-switch-speed ease-out;
  width: $checkbox-switch-size-normal * 2;
}

.checkbox-switch input + span::after {
  background-clip: padding-box;
  background-color: $crm-white;
  border: solid transparent $checkbox-switch-gap;
  border-radius: $checkbox-switch-size-normal;
  content: '';
  content: '';
  display: block;
  font-weight: bold;
  height: $checkbox-switch-size-normal;
  left: 0;
  position: absolute;
  text-align: center;
  top: $checkbox-switch-size-normal / 4;
  transition: margin-left ($checkbox-switch-speed / 2) ease-in-out;
  width: $checkbox-switch-size-normal;
}

.checkbox-switch input:checked + span::after {
  animation: popIn ease-in ($checkbox-switch-speed * 1.5) normal;
  background-clip: padding-box;
  border: solid transparent $checkbox-switch-gap;
  content: '';
  content: '';
  margin-left: $checkbox-switch-size-normal;
  margin-left: $checkbox-switch-size-normal;
}

.checkbox-switch input:checked + span::before {
  background-color: $brand-primary;
  transition: background-color $checkbox-switch-speed ease-in;
}

.checkbox-switch input:not(:checked) + span::after {
  animation: popOut ease-in ($checkbox-switch-speed * 1.5) normal;
}

/* Availability */

.checkbox-switch [disabled] + span {
  cursor: not-allowed;
  opacity: $input-disabled-opacity;
}

/* Context (colours) */

.checkbox-switch-warning input:checked + span::before {
  background: $brand-warning;
}

.checkbox-switch-danger input:checked + span::before {
  background: $brand-danger;
}

.checkbox-switch-success input:checked + span::before {
  background: $brand-success;
}

.checkbox-switch-info input:checked + span::before {
  background: $brand-info;
}

/* Sizes */

@mixin checkbox-switch-size($size) {
  line-height: $size;

  input + span::before {
    border-radius: $size;
    width: $size * 2;
  }

  input + span::after {
    border-radius: $size;
    vertical-align: middle;
    width: $size;
  }

  input + span {
    padding-left: $size * 2;
  }

  input + span::after,
  input + span::before {
    height: $size;
    line-height: $size;
  }

  input:checked + span::after {
    margin-left: $size;
  }
}

.checkbox-switch-sm {
  @include checkbox-switch-size($checkbox-switch-size-small);
}

.checkbox-switch-md {
  @include checkbox-switch-size($checkbox-switch-size-medium);
}

.checkbox-switch-lg {
  @include checkbox-switch-size($checkbox-switch-size-large);
}
